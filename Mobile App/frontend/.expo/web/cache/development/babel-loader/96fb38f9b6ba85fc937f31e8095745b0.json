{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport React, { useState, useEffect } from \"react\";\nimport { MaterialIcons } from \"@expo/vector-icons\";\nimport { AntDesign } from \"@expo/vector-icons\";\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\nimport axios from \"axios\";\nimport SafeAreaView from \"react-native-web/dist/exports/SafeAreaView\";\nimport ScrollView from \"react-native-web/dist/exports/ScrollView\";\nimport View from \"react-native-web/dist/exports/View\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport ImageBackground from \"react-native-web/dist/exports/ImageBackground\";\nimport Text from \"react-native-web/dist/exports/Text\";\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport TouchableOpacity from \"react-native-web/dist/exports/TouchableOpacity\";\nimport Image from \"react-native-web/dist/exports/Image\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\n\nvar Login = function Login(_ref) {\n  var navigation = _ref.navigation;\n\n  var _useState = useState(\"\"),\n      _useState2 = _slicedToArray(_useState, 2),\n      email = _useState2[0],\n      setEmail = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      _useState4 = _slicedToArray(_useState3, 2),\n      password = _useState4[0],\n      setPassword = _useState4[1];\n\n  useEffect(function () {\n    var checkLoginStatus = function _callee() {\n      var token;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return _regeneratorRuntime.awrap(AsyncStorage.getItem(\"authToken\"));\n\n            case 3:\n              token = _context.sent;\n\n              if (token) {\n                setTimeout(function () {\n                  navigation.replace(\"Dashboard\");\n                }, 600);\n              }\n\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              console.log(\"error\", _context.t0);\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, null, null, [[0, 7]], Promise);\n    };\n\n    checkLoginStatus();\n  }, []);\n\n  var handleLogin = function handleLogin() {\n    var user = {\n      email: email,\n      password: password\n    };\n    axios.post(\"http://localhost:9000/login\", user).then(function (response) {\n      console.log(response);\n      var token = response.data.token;\n      AsyncStorage.setItem(\"authToken\", token);\n      navigation.navigate(\"Dashboard\");\n    }).catch(function (error) {\n      alert(\"Login error\");\n      console.log(\"error \", error);\n    });\n  };\n\n  return _jsx(SafeAreaView, {\n    children: _jsxs(ScrollView, {\n      children: [_jsx(View, {\n        style: style.container,\n        children: _jsx(ImageBackground, {\n          source: require(\"../../assest/images/login_bg.png\"),\n          resizeMode: \"cover\",\n          style: style.defaultbg,\n          children: _jsx(Image, {\n            source: require(\"../../assest/images/travelit_logo.png\"),\n            style: {\n              alignItems: \"center\",\n              width: 150,\n              height: 150,\n              padding: 20,\n              resizeMode: \"contain\",\n              alignSelf: \"center\"\n            }\n          })\n        })\n      }), _jsx(View, {\n        style: style.formInput,\n        children: _jsx(TextInput, {\n          style: style.textInput,\n          placeholder: \"Email address\",\n          keyboardType: \"email-address\",\n          value: email,\n          onChangeText: function onChangeText(text) {\n            return setEmail(text);\n          }\n        })\n      }), _jsx(View, {\n        style: style.formInput,\n        children: _jsx(TextInput, {\n          style: style.textInput,\n          placeholder: \"Password\",\n          secureTextEntry: true,\n          value: password,\n          onChangeText: function onChangeText(text) {\n            return setPassword(text);\n          }\n        })\n      }), _jsx(View, {\n        style: style.formInput,\n        children: _jsx(TouchableOpacity, {\n          children: _jsxs(Text, {\n            style: {\n              color: \"#d10202\",\n              fontSize: 16,\n              fontWeight: \"500\",\n              textAlign: \"right\"\n            },\n            onPress: function onPress() {\n              return navigation.navigate(\"Forgotpw\");\n            },\n            children: [\" \", \"Fogot Password?\"]\n          })\n        })\n      }), _jsx(View, {\n        style: style.formInput,\n        children: _jsx(TouchableOpacity, {\n          style: style.mainButton,\n          onPress: handleLogin,\n          children: _jsx(Text, {\n            style: {\n              textAlign: \"center\",\n              fontSize: 16,\n              fontWeight: \"500\",\n              color: \"white\"\n            },\n            children: \"Login\"\n          })\n        })\n      }), _jsx(View, {\n        style: style.formInput,\n        children: _jsx(Text, {\n          style: {\n            textAlign: \"center\"\n          },\n          children: \"or\"\n        })\n      }), _jsx(View, {\n        style: style.formInput,\n        children: _jsx(TouchableOpacity, {\n          style: style.mainButton,\n          onPress: function onPress() {\n            return navigation.navigate(\"Register\");\n          },\n          children: _jsx(Text, {\n            style: {\n              textAlign: \"center\",\n              fontSize: 16,\n              fontWeight: \"500\",\n              color: \"white\"\n            },\n            children: \"Register\"\n          })\n        })\n      })]\n    })\n  });\n};\n\nvar style = StyleSheet.create({\n  container: {\n    flex: 1\n  },\n  defaultbg: {\n    width: \"100%\",\n    height: 140\n  },\n  formInput: {\n    marginTop: 10,\n    padding: 10\n  },\n  textInput: {\n    padding: 10,\n    fontSize: 16,\n    borderWidth: 1,\n    borderColor: \"#477173\",\n    borderRadius: 10\n  },\n  mainButton: {\n    padding: 12,\n    backgroundColor: \"#076ff7\",\n    borderRadius: 10\n  }\n});\nexport default Login;","map":{"version":3,"names":["React","useState","useEffect","MaterialIcons","AntDesign","AsyncStorage","axios","Login","navigation","email","setEmail","password","setPassword","checkLoginStatus","getItem","token","setTimeout","replace","console","log","handleLogin","user","post","then","response","data","setItem","navigate","catch","error","alert","style","container","require","defaultbg","alignItems","width","height","padding","resizeMode","alignSelf","formInput","textInput","text","color","fontSize","fontWeight","textAlign","mainButton","StyleSheet","create","flex","marginTop","borderWidth","borderColor","borderRadius","backgroundColor"],"sources":["C:/Users/inush/OneDrive/Desktop/mobile test/mobile-frontend/src/screens/authentication/Login.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { MaterialIcons } from \"@expo/vector-icons\";\r\nimport { AntDesign } from \"@expo/vector-icons\";\r\nimport AsyncStorage from \"@react-native-async-storage/async-storage\";\r\nimport axios from \"axios\";\r\n\r\nimport {\r\n  SafeAreaView,\r\n  ScrollView,\r\n  View,\r\n  StyleSheet,\r\n  ImageBackground,\r\n  Text,\r\n  TextInput,\r\n  TouchableOpacity,\r\n  Image,\r\n} from \"react-native\";\r\n\r\nconst Login = ({ navigation }) => {\r\n  const [email, setEmail] = useState(\"\");\r\n  const [password, setPassword] = useState(\"\");\r\n\r\n  //user will be navigating to the dashboard if they are registered.\r\n  useEffect(() => {\r\n    const checkLoginStatus = async () => {\r\n      try {\r\n        const token = await AsyncStorage.getItem(\"authToken\");\r\n\r\n        if (token) {\r\n          setTimeout(() => {\r\n            navigation.replace(\"Dashboard\");\r\n          }, 600);\r\n        }\r\n      } catch (error) {\r\n        console.log(\"error\", error);\r\n      }\r\n    };\r\n\r\n    checkLoginStatus();\r\n  }, []);\r\n\r\n  const handleLogin = () => {\r\n    const user = {\r\n      email: email,\r\n      password: password,\r\n    };\r\n\r\n    axios\r\n      .post(\"http://localhost:9000/login\", user)\r\n      .then((response) => {\r\n        console.log(response);\r\n        const token = response.data.token;\r\n        AsyncStorage.setItem(\"authToken\", token);\r\n        navigation.navigate(\"Dashboard\");\r\n      })\r\n      .catch((error) => {\r\n        alert(\"Login error\");\r\n        console.log(\"error \", error);\r\n      });\r\n  };\r\n\r\n  return (\r\n    <SafeAreaView>\r\n      <ScrollView>\r\n        {/* background */}\r\n        <View style={style.container}>\r\n          <ImageBackground\r\n            source={require(\"../../assest/images/login_bg.png\")}\r\n            resizeMode=\"cover\"\r\n            style={style.defaultbg}\r\n          >\r\n            <Image\r\n              source={require(\"../../assest/images/travelit_logo.png\")}\r\n              style={{\r\n                alignItems: \"center\",\r\n                width: 150,\r\n                height: 150,\r\n                padding: 20,\r\n                resizeMode: \"contain\",\r\n                alignSelf: \"center\",\r\n              }}\r\n            />\r\n          </ImageBackground>\r\n        </View>\r\n\r\n        {/* Text Input Fields */}\r\n        <View style={style.formInput}>\r\n          <TextInput\r\n            style={style.textInput}\r\n            placeholder=\"Email address\"\r\n            keyboardType=\"email-address\"\r\n            value={email}\r\n            onChangeText={(text) => setEmail(text)}\r\n          />\r\n        </View>\r\n        <View style={style.formInput}>\r\n          <TextInput\r\n            style={style.textInput}\r\n            placeholder=\"Password\"\r\n            secureTextEntry={true}\r\n            value={password}\r\n            onChangeText={(text) => setPassword(text)}\r\n          />\r\n        </View>\r\n\r\n        <View style={style.formInput}>\r\n          <TouchableOpacity>\r\n            <Text\r\n              style={{\r\n                color: \"#d10202\",\r\n                fontSize: 16,\r\n                fontWeight: \"500\",\r\n                textAlign: \"right\",\r\n              }}\r\n              onPress={() => navigation.navigate(\"Forgotpw\")}\r\n            >\r\n              {\" \"}\r\n              Fogot Password?\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n        {/* Main Button */}\r\n        <View style={style.formInput}>\r\n          <TouchableOpacity style={style.mainButton} onPress={handleLogin}>\r\n            <Text\r\n              style={{\r\n                textAlign: \"center\",\r\n                fontSize: 16,\r\n                fontWeight: \"500\",\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              Login\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n\r\n        <View style={style.formInput}>\r\n          <Text style={{ textAlign: \"center\" }}>or</Text>\r\n        </View>\r\n\r\n        {/* Registration */}\r\n        <View style={style.formInput}>\r\n          <TouchableOpacity\r\n            style={style.mainButton}\r\n            onPress={() => navigation.navigate(\"Register\")}\r\n          >\r\n            <Text\r\n              style={{\r\n                textAlign: \"center\",\r\n                fontSize: 16,\r\n                fontWeight: \"500\",\r\n                color: \"white\",\r\n              }}\r\n            >\r\n              Register\r\n            </Text>\r\n          </TouchableOpacity>\r\n        </View>\r\n      </ScrollView>\r\n    </SafeAreaView>\r\n  );\r\n};\r\n\r\nconst style = StyleSheet.create({\r\n  container: {\r\n    flex: 1,\r\n  },\r\n\r\n  defaultbg: {\r\n    width: \"100%\",\r\n    height: 140,\r\n  },\r\n\r\n  formInput: {\r\n    marginTop: 10,\r\n    padding: 10,\r\n  },\r\n\r\n  textInput: {\r\n    padding: 10,\r\n    fontSize: 16,\r\n    borderWidth: 1,\r\n    borderColor: \"#477173\",\r\n    borderRadius: 10,\r\n  },\r\n\r\n  mainButton: {\r\n    padding: 12,\r\n    backgroundColor: \"#076ff7\",\r\n    borderRadius: 10,\r\n  },\r\n});\r\nexport default Login;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}